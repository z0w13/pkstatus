import{Q as k}from"./QSkeleton-BGNcpZ0M.js";import{Q as c,a as I}from"./QTable-CaejNunE.js";import{R as $,T as P,ar as B,S as N,U as T,aq as M,d as U,t as D,b5 as E,d3 as g,W as o,X as m,Y as a,a3 as z,Z as t,a2 as r,a6 as n,$ as s,ap as y,at as w,a1 as _,aE as A,ah as V}from"./index-B5cKJEsb.js";import{Q as j}from"./QBtnGroup-BZaGG879.js";import{a as F,b as v,Q}from"./QItem-DFQyp7xd.js";import{Q as R}from"./QPageSticky-C0FhqazD.js";import{Q as G}from"./QPage-CQHXzn9r.js";import{P as K}from"./PageTitle-DsxZJMWH.js";import{I as L}from"./InitialFallbackAvatar-DdQhVARR.js";import"./QList-CeI3M5mw.js";import"./QMarkupTable-BdHJVmiq.js";import"./QSelect-D38puw0H.js";import"./QMenu-BD1NPTJN.js";import"./format-CPyQx2aO.js";import"./rtl-DFPa-2ov.js";import"./index-DhNyYKrN.js";const O={class:"col col-md-auto"},W=["src"],X=$({__name:"ManagePage",setup(Y){const i=P(),d=B(),S=N(),{id:u}=T(S),{systemCache:p,pluralKit:h}=M(),x=[{name:"avatar",field:"avatarUrl",label:"Icon",align:"left"},{name:"id",field:"id",label:"ID",align:"left"},{name:"name",field:"name",label:"Name",align:"left"},{name:"note",field:"note",label:"Note",align:"left",headerStyle:"width: 100%"},{name:"buttons",field:"",label:""}],q=U(()=>d.ids.map(l=>p.objects[l]||{id:l}));function b(l){d.delete(l),i.notify("System Deleted")}return D(()=>{d.ids.forEach(async l=>{var f;try{await h.getSystem(l)}catch(e){E(e)&&i.notify({type:"negative",message:`Error fetching ${((f=p.getCached(l))==null?void 0:f.name)||g(l,u.value)}`,caption:`${e.status}: ${e.message} (${e.code})`})}})}),(l,f)=>(o(),m(G,{class:"row justify-evenly"},{default:a(()=>[z("div",O,[t(K,{icon:"manage_accounts",text:"Systems"}),t(I,{grid:s(i).screen.lt.sm,columns:x,rows:q.value,"row-key":"name",class:"bg-lighten","card-container-class":{column:!0,"q-mx-md":!0,"q-list":!0,"q-list--separator":!1,"q-list--bordered":!1,"q-list--dark":s(i).dark.isActive},flat:""},{"body-cell-avatar":a(e=>[t(c,{props:e},{default:a(()=>[e.value!==void 0?(o(),m(L,{key:0,url:e.value,name:e.row.name,size:"24px"},null,8,["url","name"])):(o(),m(k,{key:1,type:"circle",size:"24px"}))]),_:2},1032,["props"])]),"body-cell-id":a(e=>[t(c,{props:e},{default:a(()=>[r(n(s(g)(e.row.id,s(u))),1)]),_:2},1032,["props"])]),"body-cell-name":a(e=>[t(c,{props:e},{default:a(()=>[e.value?(o(),y(w,{key:0},[r(n(e.value),1)],64)):(o(),m(k,{key:1,type:"rect"}))]),_:2},1032,["props"])]),"body-cell-buttons":a(e=>[t(c,{props:e},{default:a(()=>[t(j,{unelevated:""},{default:a(()=>[t(_,{dense:"",icon:"delete",color:"negative",onClick:C=>b(e.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),item:a(e=>[t(F,{class:"q-pa-sm"},{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(A,{color:e.row.avatarUrl?"":"primary"},{default:a(()=>[e.row.avatarUrl?(o(),y("img",{key:0,src:e.row.avatarUrl},null,8,W)):(o(),y(w,{key:1},[r(n((e.row.displayName||e.row.name).substring(0,1)),1)],64))]),_:2},1032,["color"])]),_:2},1024),t(v,null,{default:a(()=>[t(Q,null,{default:a(()=>[r(n(e.row.name),1)]),_:2},1024),t(Q,{caption:""},{default:a(()=>[r(n(s(g)(e.row.id,s(u))),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:a(()=>[t(_,{flat:"",dense:"",icon:"delete",color:"negative",onClick:C=>b(e.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["grid","rows","card-container-class"])]),t(R,{position:"bottom-right",offset:[18,18]},{default:a(()=>[t(_,{fab:"",icon:"add",color:"primary",to:"/manage/add"})]),_:1})]),_:1}))}}),fe=V(X,[["__file","/home/zowie/dev/pkstatus/src/pages/Manage/ManagePage.vue"]]);export{fe as default};
