import{d as r,c as D,r as s,g as Q,p as w,I as $,t as P,h as a,bk as E,e as F,aC as O,w as A,da as S}from"./index-B5cKJEsb.js";const G={ratio:[String,Number]};function W(e,o){return r(()=>{const u=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const x=1.7778,K=D({name:"QImg",props:{...G,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:x},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:u}){const y=s(e.initialRatio),z=W(e,y),m=Q(),{registerTimeout:M,removeTimeout:v}=w(),{registerTimeout:q,removeTimeout:C}=w(),f=r(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),H=r(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),i=[s(null),s(f.value)],n=s(0),c=s(!1),g=s(!1),T=r(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=r(()=>({width:e.width,height:e.height})),I=r(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),L=r(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function N(){if(C(),e.loadingShowDelay===0){c.value=!0;return}q(()=>{c.value=!0},e.loadingShowDelay)}function h(){C(),c.value=!1}function V({target:t}){S(m)===!1&&(v(),y.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,b(t,1))}function b(t,l){l===1e3||S(m)===!0||(t.complete===!0?R(t):M(()=>{b(t,l+1)},50))}function R(t){S(m)!==!0&&(n.value=n.value^1,i[n.value].value=null,h(),t.getAttribute("__qerror")!=="true"&&(g.value=!1),u("load",t.currentSrc||t.src))}function B(t){v(),h(),g.value=!0,i[n.value].value=H.value,i[n.value^1].value=f.value,u("error",t)}function _(t){const l=i[t].value,d={key:"img_"+t,class:I.value,style:L.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...l};return n.value===t?Object.assign(d,{class:d.class+"current",onLoad:V,onError:B}):d.class+="loaded",a("div",{class:"q-img__container absolute-full",key:"img"+t},a("img",d))}function j(){return c.value===!1?a("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},F(o[g.value===!0?"error":"default"])):a("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[a(O,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){A(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,l=>{v(),g.value=!1,l===null?(h(),i[n.value^1].value=f.value):N(),i[n.value].value=l},{immediate:!0})};$.value===!0?P(t):t()}return()=>{const t=[];return z.value!==null&&t.push(a("div",{key:"filler",style:z.value})),i[0].value!==null&&t.push(_(0)),i[1].value!==null&&t.push(_(1)),t.push(a(E,{name:"q-transition--fade"},j)),a("div",{key:"main",class:T.value,style:k.value,role:"img","aria-label":e.alt},t)}}}),U="M0 0h24v24H0z@@fill:none;&&M0 0h24v24H0zm0 0h24v24H0zm21 19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2@@fill:none;&&M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2zm-3 6.42l3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4 4-3.99z",X="M0 0 H24 V24 H0 V0 z@@fill:none;&&M12,12.75c1.63,0,3.07,0.39,4.24,0.9c1.08,0.48,1.76,1.56,1.76,2.73L18,18H6l0-1.61c0-1.18,0.68-2.26,1.76-2.73 C8.93,13.14,10.37,12.75,12,12.75z M4,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C2,12.1,2.9,13,4,13z M5.13,14.1 C4.76,14.04,4.39,14,4,14c-0.99,0-1.93,0.21-2.78,0.58C0.48,14.9,0,15.62,0,16.43V18l4.5,0v-1.61C4.5,15.56,4.73,14.78,5.13,14.1z M20,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C18,12.1,18.9,13,20,13z M24,16.43c0-0.81-0.48-1.53-1.22-1.85 C21.93,14.21,20.99,14,20,14c-0.39,0-0.76,0.04-1.13,0.1c0.4,0.68,0.63,1.46,0.63,2.29V18l4.5,0V16.43z M12,6c1.66,0,3,1.34,3,3 c0,1.66-1.34,3-3,3s-3-1.34-3-3C9,7.34,10.34,6,12,6z",Y="M0 0h24v24H0z@@fill:none;&&M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z";export{K as Q,Y as a,U as b,X as m};
