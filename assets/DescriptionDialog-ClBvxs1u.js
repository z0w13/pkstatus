import{R as z,S as I,U,r as h,d as T,aS as O,W as o,X as a,Y as r,ab as q,Z as f,a3 as t,a5 as l,$ as n,a2 as B,a6 as d,_ as j,ac as b,ap as $,ad as N,aB as V,a1 as S,b3 as Q,b4 as Y,ah as A,T as E,ar as R,a7 as H,b5 as W,aa as X}from"./index-B5cKJEsb.js";import{Q as M}from"./QMarkupTable-BdHJVmiq.js";import{v as F,A as P,M as Z}from"./MemberCard-D-huDLNl.js";import{I as G}from"./InitialFallbackAvatar-DdQhVARR.js";const w=p=>(Q("data-v-892b3b62"),p=p(),Y(),p),J={class:"col-auto self-center"},K=["src"],L=w(()=>t("td",null,"ID",-1)),x=w(()=>t("td",null,"System",-1)),ee=w(()=>t("td",null,"Members",-1)),te={key:0},se=w(()=>t("td",null,"Color",-1)),oe=w(()=>t("td",null,"Created At",-1)),le={class:"description"},ae=z({__name:"GroupCard",props:{group:{type:Object,required:!0},system:{type:Object,required:!0},details:{type:Boolean,required:!1,default:!0},popup:{type:Boolean,required:!1,default:!1}},setup(p){const _=I(),{detectPronouns:g,lookup:y}=U(_),i=h(!1),v=T(()=>{var e;return(e=O().name)==null?void 0:e.toString().startsWith("lookup-system")});return(e,m)=>(o(),a(q,null,{default:r(()=>{var c;return[f(b,{class:"row"},{default:r(()=>[t("div",J,[e.group.icon?(o(),a(G,{key:0,size:"64px",url:e.group.icon,name:e.group.getName(),onClick:m[0]||(m[0]=k=>i.value=!!e.group.icon)},null,8,["url","name"])):l("v-if",!0)]),t("div",{class:j({col:!0,"q-ml-md":!!e.group.icon,"self-center":!0})},[f(n(F.Fitty),{style:{"line-height":"100%"},options:{maxSize:100}},{default:r(()=>[B(d(e.group.getName()),1)]),_:1})],2)]),_:1}),e.group.banner?(o(),$("img",{key:0,src:e.group.banner},null,8,K)):l("v-if",!0),e.popup?(o(),a(N,{key:1,class:"bg-primary text-white",style:V(n(y).colorAccent?`min-height: 52px; background-color: #${e.group.color} !important;`:"")},{default:r(()=>[v.value?l("v-if",!0):(o(),a(S,{key:0,color:"dark",label:"View System",to:`/lookup/system/${e.system.id}`},null,8,["to"])),f(S,{color:"dark",label:"View Group",to:`/lookup/group/${e.group.id}`},null,8,["to"])]),_:1},8,["style"])):l("v-if",!0),e.details?(o(),a(b,{key:2},{default:r(()=>[f(M,{flat:"",separator:"horizontal",style:{overflow:"hidden"}},{default:r(()=>[t("tbody",null,[t("tr",null,[L,t("td",null,d(e.group.id),1)]),t("tr",null,[x,t("td",null,d(e.system.getName(n(g))),1)]),t("tr",null,[ee,t("td",null,d(e.group.members.length),1)]),e.group.color?(o(),$("tr",te,[se,t("td",{style:V({color:`#${e.group.color}`,fontSize:"48px",lineHeight:"16px",textIndent:"-4px"})}," • ",4)])):l("v-if",!0),t("tr",null,[oe,t("td",null,d(e.group.createdAt.format("YYYY-MM-DD")),1)])])]),_:1})]),_:1})):l("v-if",!0),(c=e.group.description)!=null&&c.length?(o(),a(b,{key:3},{default:r(()=>[t("pre",le,d(e.group.description),1)]),_:1})):l("v-if",!0),e.group.icon?(o(),a(P,{key:4,modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=k=>i.value=k),"avatar-url":e.group.icon},null,8,["modelValue","avatar-url"])):l("v-if",!0)]}),_:1}))}}),re=A(ae,[["__scopeId","data-v-892b3b62"],["__file","/home/zowie/dev/pkstatus/src/components/Card/GroupCard.vue"]]),C=p=>(Q("data-v-dbcc97c0"),p=p(),Y(),p),ue={class:"col-auto self-center"},ne={class:"col q-ml-md self-center"},ie=["src"],de=C(()=>t("td",null,"ID",-1)),pe=C(()=>t("td",null,"Created At",-1)),me=C(()=>t("td",null,"Tag",-1)),ye={key:0},ce=C(()=>t("td",null,"Pronouns",-1)),fe={key:1},ve=C(()=>t("td",null,"Color",-1)),ge={class:"description"},ke=z({__name:"SystemCard",props:{system:{type:Object,required:!0},details:{type:Boolean,required:!1,default:!0},popup:{type:Boolean,required:!1,default:!1}},setup(p){const _=E(),g=I(),y=R(),{detectPronouns:i,lookup:v,id:e}=U(g),m=h(!1);async function c(s){try{await y.add(s)}catch(u){if(W(u))return _.notify({type:"negative",message:`Error adding system ${s}`,caption:`${u.status}: ${u.message} (${u.code})`});throw u}}function k(s){y.delete(s)}return(s,u)=>(o(),a(q,null,{default:r(()=>[f(b,{class:"row"},{default:r(()=>[t("div",ue,[s.system.avatarUrl?(o(),a(G,{key:0,size:"64px",url:s.system.avatarUrl,name:s.system.getName(n(i)),onClick:u[0]||(u[0]=D=>m.value=!!s.system.avatarUrl)},null,8,["url","name"])):l("v-if",!0)]),t("div",ne,[f(n(F.Fitty),{style:{"line-height":"100%"},options:{maxSize:100}},{default:r(()=>[B(d(s.system.getName(n(i))),1)]),_:1})])]),_:1}),s.system.bannerUrl?(o(),$("img",{key:0,src:s.system.bannerUrl},null,8,ie)):l("v-if",!0),f(N,{class:"bg-primary text-white",style:V(n(v).colorAccent?`min-height: 52px; background-color: #${s.system.color} !important;`:"")},{default:r(()=>[s.popup?(o(),a(S,{key:0,color:"dark",label:"View",to:`/lookup/system/${s.system.id}`},null,8,["to"])):l("v-if",!0),l(" Follow/Unfollow Buttons "),n(y).has(s.system.id)?(o(),a(S,{key:2,color:"dark",icon:"group_remove",label:"Unfollow",onClick:u[2]||(u[2]=D=>k(s.system.id))})):(o(),a(S,{key:1,color:"dark",icon:"group_add",label:"Follow",onClick:u[1]||(u[1]=D=>c(s.system.id))}))]),_:1},8,["style"]),s.details?(o(),a(b,{key:1,class:"q-pt-none"},{default:r(()=>[f(M,{flat:"",separator:"horizontal",style:{overflow:"hidden"}},{default:r(()=>[t("tbody",null,[t("tr",null,[de,t("td",null,d(s.system.formatId(n(e))),1)]),t("tr",null,[pe,t("td",null,d(s.system.createdAt.format("YYYY-MM-DD")),1)]),t("tr",null,[me,t("td",null,d(s.system.tag),1)]),s.system.getPronouns(n(i))?(o(),$("tr",ye,[ce,t("td",null,d(s.system.getPronouns(n(i))),1)])):l("v-if",!0),s.system.color?(o(),$("tr",fe,[ve,t("td",{style:V({color:`#${s.system.color}`,fontSize:"48px",lineHeight:"16px",textIndent:"-4px"})}," • ",4)])):l("v-if",!0)])]),_:1})]),_:1})):l("v-if",!0),f(H),s.system.description.length>0?(o(),a(b,{key:2},{default:r(()=>[t("pre",ge,d(s.system.description),1)]),_:1})):l("v-if",!0),s.system.avatarUrl?(o(),a(P,{key:3,modelValue:m.value,"onUpdate:modelValue":u[3]||(u[3]=D=>m.value=D),"avatar-url":s.system.avatarUrl},null,8,["modelValue","avatar-url"])):l("v-if",!0)]),_:1}))}}),he=A(ke,[["__scopeId","data-v-dbcc97c0"],["__file","/home/zowie/dev/pkstatus/src/components/Card/SystemCard.vue"]]),be=z({__name:"DescriptionDialog",setup(p,{expose:_}){const{showCardDetails:g}=U(I()),y=h(!1),i=h(null),v=h(null),e=h(null);function m(c){i.value=c.group||null,v.value=c.member||null,e.value=c.system||null,y.value=!0}return _({show:m}),(c,k)=>(o(),a(X,{modelValue:y.value,"onUpdate:modelValue":k[0]||(k[0]=s=>y.value=s)},{default:r(()=>[e.value&&!v.value&&!i.value?(o(),a(he,{key:0,system:e.value,details:n(g),popup:!0},null,8,["system","details"])):l("v-if",!0),v.value&&e.value?(o(),a(Z,{key:1,member:v.value,system:e.value,details:n(g),popup:!0},null,8,["member","system","details"])):l("v-if",!0),i.value&&e.value?(o(),a(re,{key:2,group:i.value,system:e.value,details:n(g),popup:!0},null,8,["group","system","details"])):l("v-if",!0)]),_:1},8,["modelValue"]))}}),Ce=A(be,[["__file","/home/zowie/dev/pkstatus/src/components/DescriptionDialog.vue"]]);export{Ce as D,re as G,he as S};
